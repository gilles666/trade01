<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Top 30 — Coinbase · % de hausse</title>
  <style>
    :root{--bg:#0f1220;--card:#171a2b;--text:#e8eaf6;--muted:#9aa0b4;--green:#3ddc97;--red:#ff6b6b;--accent:#7c8cff;--border:#232643}
    *{box-sizing:border-box}
    body{margin:0;font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#0e1120,#0a0d17 60%);color:var(--text);padding:24px}
    header{display:flex;flex-wrap:wrap;align-items:center;gap:12px;margin-bottom:10px}
    h1{font-size:20px;margin:0}
    .pill{padding:6px 10px;border:1px solid var(--border);border-radius:999px;color:var(--muted)}
    .btn{border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    .wrap{background:rgba(23,26,43,.6);backdrop-filter:saturate(1.2) blur(6px);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    select{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px 10px}
    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{text-align:left;font-size:12px;letter-spacing:.02em;color:var(--muted);padding:12px 14px;background:rgba(124,140,255,.06);position:sticky;top:0;z-index:1}
    tbody td{padding:10px 14px;border-top:1px solid var(--border)}
    tbody tr:hover{background:rgba(124,140,255,.05)}
    .num{font-variant-numeric:tabular-nums;text-align:right}
    .sym{color:var(--muted)}
    .pos{color:var(--green);font-weight:600}
    .neg{color:var(--red);font-weight:600}
    .progress{width:100%;height:10px;background:#0d1020;border:1px solid var(--border);border-radius:999px;overflow:hidden;margin:6px 0 10px 0}
    .progress>div{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#8be9fd);transition:width .15s ease}
    .status{color:var(--muted);font-size:12px;margin-top:-4px;margin-bottom:6px}
    .counters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:6px}
    .counter{border:1px solid var(--border);border-radius:999px;padding:4px 8px;color:var(--muted);font-size:12px}
    @media(max-width:700px){.hide-sm{display:none} body{padding:16px} h1{font-size:18px} tbody td, thead th{padding:10px}}
  </style>
</head>
<body>
  <header>
    <h1>Top 30 — % de hausse · Coinbase</h1>
    <div class="controls">
      <label class="sym" for="windowSel">Fenêtre % :</label>
      <select id="windowSel">
        <option value="24">24h</option>
        <option value="12">12h</option>
        <option value="6">6h</option>
        <option value="3">3h</option>
        <option value="1">1h</option>
      </select>

      <label class="sym" for="minVolSel">Volume 24h min (USD) :</label>
      <select id="minVolSel">
        <option value="1000">1 000</option>
        <option value="10000">10 000</option>
        <option value="100000">100 000</option>
        <option value="1000000" selected>1 000 000</option>
      </select>

      <span class="pill" id="lastUpdate">Dernière maj: —</span>
      <span class="pill" id="nextIn">Prochaine maj dans: —</span>
      <button id="refreshBtn" class="btn">↻ Actualiser</button>
    </div>
  </header>

  <div class="status" id="status">En attente…</div>
  <div class="progress"><div id="bar"></div></div>
  <div class="counters" id="counters"></div>

  <div class="wrap">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Actif</th>
          <th class="hide-sm">Prix</th>
          <th class="hide-sm">Market Cap</th>
          <th class="hide-sm">Vol 24h</th>
          <th class="num">% (fenêtre)</th>
          <th class="num">% Confiance</th>
        </tr>
      </thead>
      <tbody id="tbody">
        <tr><td colspan="7" style="padding:18px;color:#9aa0b4">Chargement…</td></tr>
      </tbody>
    </table>
  </div>

  <footer style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;color:var(--muted)">
    <div>Sources : Coinbase (prix/vol.) · CoinCap (market cap)</div>
    <div><small>Filtres : prix &gt; 1 $ · % &gt; 1 % · vol24h ≥ seuil — Auto-refresh 5 min</small></div>
  </footer>

  <!-- UI = module principal ; data.js exporte les fonctions de traitement -->
  <script type="module" src="top20.js"></script>
</body>
</html>
